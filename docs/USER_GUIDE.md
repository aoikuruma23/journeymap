# 📖 JourneyMap ユーザーガイド

---

## 目次

1. [はじめに](#はじめに)
2. [インストール](#インストール)
3. [基本的な使い方](#基本的な使い方)
4. [高度な機能](#高度な機能)
5. [トラブルシューティング](#トラブルシューティング)
6. [FAQ](#faq)

---

## はじめに

JourneyMap は、写真や動画の GPS 情報を使って、あなたの旅の軌跡をマップ上に可視化するアプリです。

### 必要なもの

- GPS 情報を含む写真・動画
  - スマートフォンで撮影した写真（位置情報タグON）
  - デジタルカメラ（GPS機能付き）

### できること

✅ 写真の撮影地点をマップ上に表示  
✅ 時系列順にルートを描画  
✅ 日付範囲で絞り込み表示  
✅ 写真をスライドショーで閲覧  
✅ 動画も写真と同様に管理

---

## インストール

### Windows

1. Python 3.11 以上をインストール
   - https://www.python.org/downloads/

2. コマンドプロンプトで以下を実行:
   ```cmd
   cd journeymap
   python -m venv venv
   venv\Scripts\activate
   pip install -r requirements.txt
   ```

### macOS / Linux

1. Python 3.11 以上をインストール

2. ターミナルで以下を実行:
   ```bash
   cd journeymap
   python3 -m venv venv
   source venv/bin/activate
   pip install -r requirements.txt --break-system-packages
   ```

---

## 基本的な使い方

### ステップ1: アプリを起動

```bash
streamlit run main.py
```

ブラウザが自動的に開きます（開かない場合は http://localhost:8501 にアクセス）。

### ステップ2: 写真フォルダを選択

1. サイドバーの「📂 写真フォルダ選択」にフォルダパスを入力
2. 「サブフォルダも探索」をチェック（推奨）
3. 「🔍 スキャン開始」をクリック

**Tips:**
- 初回スキャンには時間がかかります
- GPS 情報がない写真はスキップされます

### ステップ3: マップを表示

スキャン完了後、「🗺️ マップを生成」ボタンをクリックします。

**マップの操作:**
- ドラッグ: 地図を移動
- スクロール: ズームイン/アウト
- マーカークリック: 撮影情報のポップアップ表示

### ステップ4: 写真を閲覧

マップ下部の「📸 写真一覧」で、写真をサムネイル表示できます。

**操作:**
- サムネイルクリック: 詳細情報を表示
- 「🔍 拡大表示」: 写真を拡大表示
- ナビゲーションボタン: 前後の写真に移動
- 「▶️ スライドショー開始」: 自動再生

---

## 高度な機能

### タイムラインフィルタ

特定の期間の写真のみを表示できます。

1. サイドバーの「📅 タイムラインフィルタ」で日付範囲を選択
2. 「🔍 フィルタを適用」をクリック
3. マップと写真一覧が自動更新されます

**Tips:**
- 「🔄 フィルタをリセット」で全期間に戻せます
- 自動更新が重い場合は、設定でOFFにできます

### スライドショー

写真を自動的に連続表示できます。

1. 任意の写真を拡大表示
2. 「▶️ スライドショー開始」をクリック
3. 速度を選択（1/2/3/5秒）

**操作:**
- 「⏸️ 一時停止」: スライドショーを停止
- ナビゲーションボタン: 手動で前後に移動

### 動画再生

動画もサムネイル表示され、クリックで再生できます。

1. 写真一覧で動画のサムネイルをクリック
2. 「📋 詳細情報」→「▶️ 再生」をクリック
3. 動画再生モーダルが開きます

---

## トラブルシューティング

### 問題: 写真がスキャンされない

**原因:**
- GPS 情報を含んでいない
- ファイル形式が未対応

**解決策:**
1. スマートフォンの位置情報タグをONにして撮影
2. 対応フォーマット（JPG, PNG, HEIC, MP4, MOV）を確認

### 問題: マップが表示されない

**原因:**
- スキャン済み写真が0件
- ブラウザの互換性問題

**解決策:**
1. GPS 情報を含む写真があることを確認
2. ブラウザを最新版に更新
3. キャッシュをクリア

### 問題: アプリが遅い

**原因:**
- 大量のデータ
- 自動更新が有効

**解決策:**
1. フィルタ範囲を狭める
2. 自動更新をOFFにする
3. キャッシュをクリア

---

## FAQ

### Q: GPS 情報がない写真はどうなりますか？
A: スキップされ、マップには表示されません。スキャン結果で「スキップ」数を確認できます。

### Q: データベースをリセットするには？
A: サイドバーの「データベースをリセット」ボタンをクリックしてください。

### Q: 他のマップサービスは使えますか？
A: 現在は Folium（OpenStreetMap）のみ対応しています。

### Q: データはどこに保存されますか？
A: `data/journeymap.db`（SQLite）に保存されます。写真ファイル自体は移動されません。

### Q: オフラインで使えますか？
A: マップ表示にはインターネット接続が必要です。

---

## サポート

問題が解決しない場合は、以下からお問い合わせください:

- 📧 Email: your.email@example.com
- 🐛 GitHub Issues: https://github.com/yourusername/journeymap/issues

---

**良い旅を！** 🗺️


